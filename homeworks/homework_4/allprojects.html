<!DOCTYPE html>
<html>
<head>
    <title>Final Projects</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
    integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
    integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
    crossorigin=""></script>
    <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.4.1/leaflet.markercluster.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.4.1/MarkerCluster.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.4.1/MarkerCluster.Default.css" />
    
</head>
<link rel="stylesheet" href="style.css">
<script src="data/smallest.js"></script>


<body> 
<h5>The Lebanese Civil War</h5>
<h2>Louisa Turner - April 21st, 2024</h2>
<h2>The University of North Carolina at Chapel Hill</h2>
<div class = "container">
    <div class="arrow-down"></div>
</div>
<h3>This webpage will guide you through a brief overview of the Lebanese Civil War, which took place from 1975 to 1989.</h3>
<div class="row">
    <div class="column">
        <a href = "https://media.gettyimages.com/photos/people-of-beirut-stroll-along-destroyed-and-damaged-buildings-the-picture-id607382598?k=6&m=607382598&s=594x594&w=0&h=rWyks9GkK-tiR7BrsYtgNpluy8j1bmBuoa_erNz0XlQ=">
        <img  src="https://media.gettyimages.com/photos/people-of-beirut-stroll-along-destroyed-and-damaged-buildings-the-picture-id607382598?k=6&m=607382598&s=594x594&w=0&h=rWyks9GkK-tiR7BrsYtgNpluy8j1bmBuoa_erNz0XlQ=" alt="2012" style="width:100%; height:350px">
        </a>
    </div>
    <div class="column">
        <a href = "https://cdn.britannica.com/61/196761-050-93742122/view-remains-barracks-terrorist-bomb-attack-US-1983.jpg?w=400&h=300&c=crop">
        <img  src="https://cdn.britannica.com/61/196761-050-93742122/view-remains-barracks-terrorist-bomb-attack-US-1983.jpg?w=400&h=300&c=crop" alt="2020" style="width:100%; height:350px">
        </a>
    </div>
    <div class="column">
        <a href = "https://www.thoughtco.com/thmb/eVIWeKvV59T2aylW_Hb1H2eFNF4=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/GettyImages-607440036-5922ffb03df78cf5faf99555.jpg">
        <img  src="https://www.thoughtco.com/thmb/eVIWeKvV59T2aylW_Hb1H2eFNF4=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/GettyImages-607440036-5922ffb03df78cf5faf99555.jpg" alt="2016" style="width:100%; height:350px">
        </a>
    </div>
</div>

<div class = "container">
    <div class = "titlecontainer">
        <h4>Introduction</h4>
    </div>
</div>
<div class="container">
    <div class="textcontainer">
    <h6> The conflict was primarily fought between various religious and ethnic factions within Lebanon. The war was characterized by sectarian violence, foreign interventions, and numerous shifts in alliances. Political tensions were exacerbated by perceptions of unfair power-sharing among Lebanon's communities. The Maronite Christian community, traditionally the dominant political force, faced challenges from a growing Muslim population seeking a more equitable share of political power. Additionally, the influx of Palestinian refugees, displaced during the Arab-Israeli conflicts, further strained Lebanon's internal dynamics. Take a look at this heatmap to learn about where incidents during the decades-long conflict were concentrated! </h6>
    </div>
</div>

<div class = "container">
    <div class="arrow-down"></div>
</div>
<br>



<h1>Heatmap of Incidents in the Middle East During The Lebanese Civil War (1975-1989)</h1>
<div id="mapid1"></div> 

<script>
var map1 = L.map('mapid1').setView([33.81673596567925, 45], 6); 

L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
subdomains: 'abcd',
maxZoom: 20
}).addTo(map1);

var desiredCountries = ["Lebanon", "Israel", "Iran", "Syria", "Iraq", "Jordan"];
var startDate = new Date(1975, 0, 1); 
var endDate = new Date(1989, 11, 31); 
var filteredFeatures = smallest.features.filter(function(feature) {
    var featureDate = new Date(feature.properties.Year, feature.properties.Month - 1, feature.properties.Day);
    return desiredCountries.includes(feature.properties.country_name) &&
        featureDate >= startDate && featureDate <= endDate;
});

// Extract coordinates from filtered features
var incidents = [];

filteredFeatures.forEach(function(feature) {
    if (feature.geometry && feature.geometry.coordinates) {
        var coordinates = feature.geometry.coordinates;
        var latLng = L.latLng(coordinates[1], coordinates[0]); 
        incidents.push(latLng);
    }
});

// Create heatmap layer
var heat1 = L.heatLayer(incidents, {
    radius: 55,
    blur: 15,
    maxZoom: 17,
    gradient: { 0.1: 'blue', 0.2: 'cyan', 0.3: 'lime', 0.4: 'yellow', 0.6: 'orange', .9: 'red' },
});

heat1.addTo(map1);

var legend1 = L.control({position:'bottomleft'});
    legend1.onAdd = function (map) {
        var div1 = L.DomUtil.create('div', 'info legend2');
        div1.innerHTML = `
            <div>
                <div style="background: linear-gradient(to right, blue, cyan); width: 100px; height: 20px;"></div>
                <p>Least concentrated</p>
            </div>
            <div>
                <div style="background: linear-gradient(to right, cyan, lime); width: 100px; height: 20px;"></div>
            </div>
            <div>
                <div style="background: linear-gradient(to right, lime, yellow); width: 100px; height: 20px;"></div>
            </div>
            <div>
                <div style="background: linear-gradient(to right, yellow, orange); width: 100px; height: 20px;"></div>
            </div>
            <div>
                <div style="background: linear-gradient(to right, orange, red); width: 100px; height: 20px;"></div>
                <p>Most concentrated</p>
            </div>`;
        return div1;
    };
    legend1.addTo(map1);

</script>
<div class="container">
    <div class="textcontainer">
    <h6>
        Feel free to zoom in on areas that interest you, and use the heatmap legend to distinguish the concentration of incidents.
    </h6>
    </div>
</div>

<div class = "container">
    <div class="arrow-down"></div>
</div>

<div class="container">
    <div class="textcontainer">
        <h6>
            To analyze the Civil War through a temporal lense, use the slider in the next map to move through the war years, using the legend to aid understanding. Again, feel free to zoom on areas of interest.
        </h6>        
    </div>
</div>

</body>

<br>


<h1>Heatmap of Incidents within Lebanon During The Lebanese Civil War (1975-1989)</h1>
    <div class="slidecontainer">
        <input type="range" min="1975" max="1989" value="1975" class="slider" id="yearRange2">
        <h3>Year: <span id="yearDisplay2">1975</span></h3>
    </div>
    <div id="mapid2"></div>
    <script>
        var map2 = L.map('mapid2').setView([33.8547, 35.8623], 8); 

        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        }).addTo(map2);

        var desiredCountries2 = ["Lebanon"];
        var startDate2 = new Date(1975, 0, 1); 
        var endDate2 = new Date(1989, 11, 31); 
        var filteredFeatures2 = smallest.features.filter(function(feature) {
            var featureDate = new Date(feature.properties.Year, feature.properties.Month - 1, feature.properties.Day);
            return desiredCountries2.includes(feature.properties.country_name) &&
                featureDate >= startDate2 && featureDate <= endDate2;
        });

        // Extract coordinates from filtered features
        var incidents2 = [];
        filteredFeatures2.forEach(function(feature) {
            if (feature.geometry && feature.geometry.coordinates) {
                var coordinates = feature.geometry.coordinates;
                var latLng = L.latLng(coordinates[1], coordinates[0]);
                incidents2.push(latLng);
            }
        });

        // Create initial heatmap layer
        var heat2 = L.heatLayer(incidents2, {
            radius: 55,
            blur: 15,
            maxZoom: 17,
            gradient: { 0.1: 'blue', 0.2: 'cyan', 0.3: 'lime', 0.4: 'yellow', 0.6: 'orange', .9: 'red' }
        }).addTo(map2);

        var slider2 = document.getElementById("yearRange2");
        var output2 = document.getElementById("yearDisplay2");

        slider2.oninput = function() {
            updateMap2(this.value);
        };

        updateMap2(slider2.value);

        function updateMap2(year){
            // Filter features based on selected year
            var filteredFeatures2 = smallest.features.filter(function(feature) {
                var featureDate = new Date(feature.properties.Year, feature.properties.Month - 1, feature.properties.Day);
                return desiredCountries2.includes(feature.properties.country_name) &&
                    featureDate.getFullYear() == year;
            });

            // Extract coordinates from filtered features
            var newIncidents2 = [];
            filteredFeatures2.forEach(function(feature) {
                if (feature.geometry && feature.geometry.coordinates) {
                    var coordinates = feature.geometry.coordinates;
                    var latLng = L.latLng(coordinates[1], coordinates[0]);
                    newIncidents2.push(latLng);
                }
            });

            // Update heatmap layer with new data
            heat2.setLatLngs(newIncidents2);

            // Update year display
            output2.textContent = year;
        }

    var legend3 = L.control({position:'bottomleft'});
    legend3.onAdd = function (map) {
        var div3 = L.DomUtil.create('div', 'info legend2');
        div3.innerHTML = `
            <div>
                <div style="background: linear-gradient(to right, blue, cyan); width: 100px; height: 20px;"></div>
                <p>Least concentrated</p>
            </div>
            <div>
                <div style="background: linear-gradient(to right, cyan, lime); width: 100px; height: 20px;"></div>
            </div>
            <div>
                <div style="background: linear-gradient(to right, lime, yellow); width: 100px; height: 20px;"></div>
            </div>
            <div>
                <div style="background: linear-gradient(to right, yellow, orange); width: 100px; height: 20px;"></div>
            </div>
            <div>
                <div style="background: linear-gradient(to right, orange, red); width: 100px; height: 20px;"></div>
                <p>Most concentrated</p>
            </div>`;
        return div3;
    };
    legend3.addTo(map2);
    </script>

</body>

<div class="container">
    <div class="textcontainer">
        <h6>These heatmaps indicate the concentration of incidents during the Lebanese Civil War, not only within Lebanon but across the Middle East. In 1975, Lebanon's Muslims and leftists supported the Palestine Liberation Organization (PLO) and sought more political power; its Christians, seeking to maintain their political dominance, opposed the PLO. The factions fought fiercely through early 1976, and Lebanon became effectively partitioned, with the Christians in power in the north and the Muslims in the south. 
            From this map, we are also able to witness the varying extent of incidents that occurred during the civil war years, with a heightened number of attacks during 1983. This year was a pivotal moment in the war. 
            Hezbollah, a Shiite militant group backed by Iran, emerged during this time. They vehemently opposed the Israeli occupation and began launching attacks against Israeli forces. Moreover, factional fighting continued throughout the year, with clashes between Lebanese militias, Syrian forces, and Palestinian factions.
        </h6>
        <h6>Geographically located in the center of the country and serving as the capital, Beirut was a hotspot for conflict throughout the years. 
        Once known as the "Paris of the Middle East," Beirut suffered tremendous destruction during the war. The once-vibrant cityscape was transformed into a landscape of ruins, with iconic landmarks reduced to rubble and residential neighborhoods shattered by relentless violence. 
        The city was divided into sectors controlled by different factions, including Christian militias, Muslim militias, and Palestinian groups. These groups fought for control of strategic areas, resulting in widespread destruction.</h6>
    </div>
</div>
<div class="container">
    <div class="titlecontainer">
        <h4>Taking A Closer Look</h4>
    </div>
</div>

<br>

<body>
    <h1>Incidents in the Middle East During The Lebanese Civil War (1975-1989) by Attack Type</h1>
    <div id="mapid3"></div>
<script>

// Upload leaflet Map
var map3 = L.map('mapid3').setView([33.81673596567925, 45], 6); 
L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
    subdomains: 'abcd',
    maxZoom: 20
}).addTo(map3);

// Filters features for my data
var filteredFeatures = smallest.features.filter(function(feature) {
    var desiredCountries = ["Lebanon", "Israel", "Iran", "Syria", "Iraq", "Jordan"];
    var startDate = new Date(1975, 0, 1); 
    var endDate = new Date(1989, 11, 31); 
    var featureDate = new Date(feature.properties.Year, feature.properties.Month - 1, feature.properties.Day);
    return desiredCountries.includes(feature.properties.country_name) &&
        featureDate >= startDate && featureDate <= endDate;
});

// Creates a Marker Cluster Group
var markers = L.markerClusterGroup({
    iconCreateFunction: function(cluster) {
        return L.divIcon({ 
            className: 'custom-cluster-icon', // Add a custom class for styling
            html: '<div style="background-color: black; border-radius: 50%; width: 40px; height: 40px; display: flex; justify-content: center; align-items: center;"><span style="color: white;">' + cluster.getChildCount() + '</span></div>'
        });
    }
});

// Icons
var icons = {
    'Hostage Taking (Kidnapping)': L.icon({ iconUrl: './data/KidnappingIcon.png', iconSize: [10, 10] }),
    'Assassination': L.icon({ iconUrl: './data/AssassinationIcon.png', iconSize: [10, 10] }),
    'Bombing/Explosion': L.icon({ iconUrl: './data/BombingIcon.png', iconSize: [10, 10] }),
    'Facility/Infrastructure Attack': L.icon({ iconUrl: './data/FacilityAttackIcon.png', iconSize: [10, 10] }),
    'Armed Assault': L.icon({ iconUrl: './data/ArmedAssaultIcon.png', iconSize: [10, 10] }),
    'Hijacking': L.icon({ iconUrl: './data/HijackingIcon.png', iconSize: [10, 10] }),
    'Unknown': L.icon({ iconUrl: './data/UnknownIcon.png', iconSize: [10, 10] }),
    'Unarmed Assault': L.icon({ iconUrl: './data/UnarmedAssaultIcon.png', iconSize: [10, 10] }),
    'Hostage Taking (Barricade Incident)': L.icon({ iconUrl: './data/BarricadeIcon.png', iconSize: [10, 10] })
};

// Function to get icon based on attack type
function getIcon(type) {
    return icons[type] || L.icon({ iconUrl: './data/UnknownIcon.png', iconSize: [10, 10] }); // Default icon if type not found
};

// attack type layer using markers 
attackLayer = L.geoJSON(filteredFeatures, {
    pointToLayer: function(feature, latlng) {
    var properties = feature.properties;
    var attackType = properties['Attack_type'];
    var icon = getIcon(attackType);
    var marker = L.marker(latlng, { icon: icon });

    if (properties.summary) {
        marker.bindPopup(properties.summary);
    }
    
    markers.addLayer(marker); 
}
})

// adds markers layer to map
map3.addLayer(markers);

//legend
var legend3 = L.control({position: 'bottomright'});
        legend3.onAdd = function (map3) {
        var div = L.DomUtil.create('div', 'info legend'),
        attackTypes = Object.keys(icons);

        div.innerHTML = '<h2>Attack Type</h2>';

        for (var i = 0; i < attackTypes.length; i++) {
            var attackType = attackTypes[i];
            div.innerHTML +=
                '<img src="' + icons[attackType].options.iconUrl + '" width="20" height="20">' + attackType + '<br>';
        }
        return div;
        };

    legend3.addTo(map3);

</script>
</body>

<div class = "container">
    <div class = "textcontainer">
    <h6>The war continued throughout the 70's and into the 80's, characterized by a wide variety of core issues, motives, and attacks. Despite various attempts at ceasefire and peace negotiations, the war dragged on, with intermittent periods of calm punctuated by renewed violence. The conflict's impact extended far beyond Lebanon's borders, shaping regional dynamics and leaving a lasting legacy of instability in the Middle East. This map emphasizes the damage within Lebanon, particuraly Beirut, as it experienced tremendous damage during the war.   
    </h6>
    <h6>
    The numbers on the black dots represent the total number of incidents that occurred within that area, but as you zoom the clusters dissipate and represent individual incidents. The legend indicates the color of the incident's attack type. I recommend investigating Lebanon, specifically Beirut, and clicking on the "742" size cluster to see the attack types of 742 incidents that took place in Beirut.
    </h6>
    </div>
</div>

<div class = "container">
    <div class="arrow-down"></div>
</div>
<br>

<body>
    <h1>Summary of Incidents within Lebanon from 1975-1989</h1>
    <div class="slidecontainer">
        <input type="range" min="1975" max="1989" value="1975" class="slider" id="yearRange4">
        <h3>Year: <span id="yearDisplay4">1975</span></h3>
    </div>
    <div id="mapid4"></div>

    <script>
        var map4 = L.map('mapid4').setView([33.8547, 35.8623], 8);

        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        }).addTo(map4);

        var desiredCountry = "Lebanon";
        var markers = L.markerClusterGroup({
            iconCreateFunction: function(cluster) {
        return L.divIcon({ 
            className: 'custom-cluster-icon', 
            html: '<div style="background-color: black; border-radius: 50%; width: 40px; height: 40px; display: flex; justify-content: center; align-items: center;"><span style="color: white;">' + cluster.getChildCount() + '</span></div>'
        });
    }
    });markers.addTo(map4);

    var updateMap = function (year) {
    markers.clearLayers();
    var addedCoordinates = {}; 
    var totalIncidents = 0; 

    smallest.features.forEach(function (feature) {
        var properties = feature.properties;
        if (properties.Year == year && properties.country_name == desiredCountry && feature.geometry) {
            try {
                var lat = feature.geometry.coordinates[1];
                var lng = feature.geometry.coordinates[0];
            } catch (error) {
                console.error("Error reading coordinates:", error);
                return; // Skip this incident if coordinates cannot be read
            }

            var coordinatesKey = lat.toFixed(3) + '_' + lng.toFixed(3); // Create a key for the coordinates

            // Check if these coordinates have been added before
            if (coordinatesKey in addedCoordinates) {
                // Randomize coordinates slightly
                lat += (Math.random() - 0.5) / 150; 
                lng += (Math.random() - 0.5) / 150;
            }
            
            addedCoordinates[coordinatesKey] = true; 

            var popupContent = "<b>Date:</b> " + properties.Day + "/" + properties.Month + "/" + properties.Year + "<br>" +
                "<b>Group Name:</b> " + properties.group_name + "<br>" +
                "<b>Attack Type:</b> " + properties.Attack_type + "<br>" +
                "<b>Target:</b> " + properties.Target_type + "(" + properties.Target_subtype + ")" + "<br>" +
                "<b>Success:</b> " + properties.success + "<br>" +
                "<b>Motive:</b> " + properties.motive + "<br>" +
                "<b>Summary:</b> " + properties.summary;

            var markerIcon = L.icon({
                iconUrl: 'https://cdn2.iconfinder.com/data/icons/target-aim/100/target_01_05_destination_marker_place_contour_location_map-1024.png',
                iconSize: [41, 41],
                iconAnchor: [12, 41],
                popupAnchor: [1, -34],
                tooltipAnchor: [16, -28],
                shadowSize: [41, 41]
            });

            var marker = L.marker([lat, lng], { icon: markerIcon }).bindPopup(popupContent);

            markers.addLayer(marker);
            totalIncidents++; 
        }
    });

    document.getElementById('yearDisplay4').innerText = year;
};

    var yearSlider = document.getElementById("yearRange4");
    yearSlider.oninput = function () {
        updateMap(this.value);
    };

        updateMap(yearSlider.value);
    </script>
</body>

<div class = "container">
    <div class = "textcontainer">
    <h6>To learn a bit more about these incidents, this map allows you to witness incidents and attacks throughout the years. 
    Each incident contains the date it occurred, the group's name who committed the attack, the attack type, the targets, whether or not it was a success, the motive (if known), and a detailed summary (if available) of the attack. 
    </h6>
    <h6>
        The war came to an end in 1989 through The Taif Agreement, named after the city in Saudi Arabia where it was negotiated. It was a pivotal moment in ending the civil war, as it aimed to bring an end to the conflict by addressing the root causes of the war. The agreement called for the disarmament of militias, the withdrawal of foreign forces from Lebanon, and the reassertion of the Lebanese government's authority over the entire country. The Taif Agreement was ratified by the Lebanese Parliament in 1989, and it laid the groundwork for the end of the civil war. However, full implementation of the agreement took time, and it wasn't until 1990 that the Syrian-led military offensive against General Michel Aoun, who refused to accept the Taif Agreement, brought a final end to the war.  After the war ended, Lebanon faced the immense task of rebuilding the country and reconciling its divided communities. Reconstruction efforts, both domestically and with international assistance, aimed to restore infrastructure, revive the economy, and heal the wounds left by the war.
    </h6>
    </div>
</div>

<div class="finalnotecontainer">
    <h4>
        Data for this project is sourced from the <a href="https://www.start.umd.edu/gtd/">Global Terrorism Database</a>. Unlike many other event databases, the database includes systematic data on domestic as well as transnational and international terrorist incidents that have occurred during 1975-2020 and now includes more than 200,000 cases.
    </h4>
</div>

<br>

<div class = "container">
    <div class="arrow-down"></div>
</div>

<div class = "container">
    <div class = "textcontainer">
    <h6> This webpage was built as a final project for UNC's Geovisualizing Change with Javier Arce-Nazario in the Geography Department. Coding assistance was provided by Javier and <a href="https://chat.openai.com/">Chat GPT.</a> 
    </h6>
    <h6>
        Resources include <a href="https://www.britannica.com/event/Lebanese-Civil-War">Lebanese Civil War: History, & Significance</a>, <a href="https://merip.org/1990/01/primer-lebanons-15-year-war-1975-1990/">Lebanons 15-Year War: 1975-1990</a>, and <a href = "https://www.worldhistoryblog.com/Lebanese-Civil-War.html">Lebanese Civil War: Middle East [1975-1990]</a>.
    </h6>
</div>
</div>

<div class = "container">
    <img src = "https://identity.unc.edu/wp-content/themes/heelium-identity/assets/img/footer-unc-logo.png">
</div>
</html>











